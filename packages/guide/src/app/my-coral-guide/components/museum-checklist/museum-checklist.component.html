<app-list-detail-container [removePlaceholder]="showTable">
    @if (selectedEntity) {
        <app-database-item-details [itemId]="selectedEntity.id" listDetail context="museum">
            <ng-template let-details appDatabaseItemDetails>
                @if (details.fish) {
                    <app-fish [fish]="details.fish"/>
                } @else if (details.insect) {
                    <app-insect [critter]="details.insect"/>
                } @else if (details.oceanCritter) {
                    <app-insect [critter]="details.oceanCritter"/>
                } @else if (details.chanceAsProcessResult) {
                    <app-shop-processing-result class="mb-4" [itemProcessData]="details.chanceAsProcessResult"/>
                }
            </ng-template>
        </app-database-item-details>
    }
    @if (checklistDefinition$ | async; as checklistDefinition) {


        <mat-tab-group (selectedTabChange)="updateUrl($event)" [selectedIndex]="selectedTabIndex()">
            @for (tab of (checklistDefinition | keyvalue: null); track tab) {
                <mat-tab [formGroup]="checklistForm" [label]="tab.key">

                    @if (!showTable) {

                        <div class="icon-grid">
                            @for (entry of tab.value; track entry) {
                                <div
                                        [class.checklist-checked]="checklistForm.get(entry.id)?.value"
                                        [class.selected-icon]="selectedEntity?.id === entry.id"
                                        class="icon-grid-item checklist-item  flex flex-col">
                                    <app-item-icon
                                            (click)="showDetails(entry)"
                                            [itemName]="entry.iconName"/>
                                    <app-item-status-badges [status]="getItemStatus(entry, tab.key)"/>
                                    <label class="text-white flex justify-center" for="entry-{{entry.id}}-input">
                                        <mat-checkbox [formControlName]="entry.id" class="flex" id="entry-{{entry.id}}"
                                                      name="entry-{{entry.id}}"></mat-checkbox>
                                    </label>
                                </div>
                            }
                        </div>

                    }
                </mat-tab>
            }
        </mat-tab-group>

    }
</app-list-detail-container>
