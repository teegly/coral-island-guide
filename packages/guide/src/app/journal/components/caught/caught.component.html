<app-list-detail-container [removePlaceholder]="showTable">
    @if (selectedEntity) {
        <app-caught-details [critter]="selectedEntity" listDetail/>
    }

    <mat-tab-group (selectedTabChange)="updateUrl($event); resetLocationFilter()" [selectedIndex]="selectedTabIndex()">
        @for (tab of tabs; track tab; let tabIndex = $index) {
            <mat-tab [label]="tab.title">
                @if ((tab.data |async); as syncedData) {

                    <app-data-filter [(showTable)]="showTable"
                                     [parentFormGroup]="formControl"
                                     [locations]="getLocations(syncedData)"/>
                    @if (!showTable) {

                        <div class="icon-grid">
                            @for (entry of syncedData; track entry) {
                                <div class="icon-grid-item flex flex-col">
                                    <app-item-icon [itemName]="entry.item.iconName"
                                                   (click)="showDetails(entry)"
                                                   [class.selected-icon]="selectedEntity?.item?.id === entry.item.id"
                                    />
                                    <app-item-status-badges [status]="getItemStatus(entry, tabIndex)"/>
                                </div>
                            }
                        </div>

                    }
                    @if (showTable) {

                        <app-caught-table [dataSource]="syncedData" [tabIndex]="tabIndex"></app-caught-table>

                    }

                }
            </mat-tab>
        }
    </mat-tab-group>
</app-list-detail-container>
